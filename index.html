<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New Year Marker AR â€” AR.js + A-Frame</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <!-- AR.js aframe build -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
      body { margin: 0; overflow: hidden; }
      #info { position: absolute; left: 10px; top: 10px; z-index: 2; color: white; font-family: sans-serif; background: rgba(0,0,0,0.4); padding: 6px 10px; border-radius: 6px;}
    </style>
  </head>

  <body>
    <div id="info">Point the camera at the Hiro marker (or use custom pattern).</div>

    <a-scene
      vr-mode-ui="enabled: false"
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false;"
      renderer="logarithmicDepthBuffer: true;"
    >
      <!-- Camera -->
      <a-entity camera></a-entity>

      <!-- Marker: preset "hiro". For custom marker use: type="pattern" url="path/to/your.patt" -->
      <a-marker preset="hiro" id="ny-marker">
        <!-- A simple 3D glTF model anchored to the marker -->
        <!-- Replace the src with your hosted newyear.gltf (must be CORS-enabled) -->
        <a-entity id="newyear"
                  gltf-model="#gltfModel"
                  scale="0.7 0.7 0.7"
                  position="0 0 0"
                  visible="false"
                  animation="property: position; to: 0 0.12 0; dir: alternate; dur: 900; loop: true; easing: easeInOutSine">
        </a-entity>

        <!-- Optional: simple text/celebration built with A-Frame primitives -->
        <a-entity position="0 0.4 0" rotation="-90 0 0" visible="false" id="sparkles">
          <a-text value="ðŸŽ‰ Happy New Year! ðŸŽŠ"
                  align="center"
                  width="2"
                  color="#ffd700">
          </a-text>
        </a-entity>

      </a-marker>

      <!-- Add the model asset -->
      <a-assets>
        <!-- Provide your glTF file (or host a small one). Example uses a placeholder id only; update src to your file URL -->
        <a-asset-item id="gltfModel" src="https://example.com/models/newyear.gltf"></a-asset-item>
      </a-assets>

      <!-- A small ground plane so the scene is not empty if marker missing -->
      <a-entity light="type: ambient; intensity: 0.8"></a-entity>
      <a-entity light="type: directional; intensity: 0.5" position="0 1 0"></a-entity>
    </a-scene>

    <script>
      // Show/hide content when marker is detected / lost
      const marker = document.querySelector('#ny-marker');
      const model = document.querySelector('#newyear');
      const sparkles = document.querySelector('#sparkles');

      marker.addEventListener('markerFound', () => {
        model.setAttribute('visible', 'true');
        sparkles.setAttribute('visible', 'true');
      });

      marker.addEventListener('markerLost', () => {
        model.setAttribute('visible', 'false');
        sparkles.setAttribute('visible', 'false');
      });
    </script>
  </body>
</html>
